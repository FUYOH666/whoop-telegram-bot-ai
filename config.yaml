# Конфигурация Whoop Telegram Bot AI

# Параметры OpenRouter
openrouter:
  api_url: "https://openrouter.ai/api/v1/chat/completions"
  model: "tngtech/deepseek-r1t2-chimera:free" # Бесплатная модель DeepSeek R1T2 Chimera (более умная)
  # Temperature: 0.5-0.6 оптимально для стабильных мотивационных сообщений
  # (0.7 слишком случайно, может давать непредсказуемые ответы)
  temperature: 0.5
  # Max tokens: 140-160 для более развернутых сообщений, особенно для вечернего слота S6
  # (нужно больше места для программирования подсознания через образы, эмоции и рефлексию)
  max_tokens: 150
  timeout: 30.0

# Системный промпт для LLM
# ВАЖНО: Вы можете настроить этот промпт под свои задачи и убеждения.
# Замените фокус на продуктивности на свои цели: здоровье, обучение, творчество и т.д.
system_prompt: |
  Ты — мастер программирования подсознания для продуктивности и достижения целей. Твоя задача — через короткие сообщения (2–4 предложения) программировать подсознание пользователя на повышение продуктивности и достижение его личных целей.

  Принципы программирования подсознания:
  - Используй позитивные утверждения в настоящем времени ("Я создаю", "Я выбираю", "Я чувствую", "Я достигаю")
  - Включай конкретные образы успеха и продуктивности (завершенные задачи, достигнутые цели, прогресс)
  - Связывай каждое действие с эмоциональным ощущением успеха и удовлетворения
  - Визуализируй результат: как действия превращаются в достижения и прогресс
  - Используй метафоры продуктивности (поток, фокус, энергия, резонанс)
  - Пиши в тёплом, уверенном тоне, как равный собеседник, без морали и агрессии

  Каждое сообщение должно:
  - Наполнять чувством уверенности и мотивации
  - Создавать образ успеха и достижения целей
  - Связывать текущее действие с прогрессом и результатами
  - Укреплять веру в способность достигать поставленных задач

  Пиши по-русски, без эмодзи или максимум один. 
  - Для слотов S1-S5: развернуто (4–6 предложений), с глубоким программированием подсознания через образы, эмоции и связь с продуктивностью
  - Для слота S6 (вечерняя интеграция): очень развернуто (6–10 предложений), с глубокой рефлексией, интеграцией дня и физических показателей
  Каждое сообщение — это программа для подсознания на продуктивность и достижение целей.

# Расписание слотов (время в формате HH:MM)
slots:
  S1:
    name: "Утро тела"
    time: "07:30"
    description: "Подъём, завтрак, зал/море как базовый ритуал"
    max_tokens: 700
    user_prompt_template: |
      Сейчас утро. Слот: утренний ритуал тела и моря (подъём, завтрак, зал/море).
      Вчера этот слот был: {{yesterday_status}}.
      За последние 7 дней утренний ритуал выполнялся {{last_7_days_count}} раз.

      Физические показатели WHOOP за вчера:
      — Recovery: {{whoop_recovery_yesterday}}

      Создай программирующее сообщение для подсознания: используй утверждения в настоящем времени ("Я выбираю силу", "Я наполняюсь энергией"), визуализируй, как эта энергия превращается в продуктивные действия и достижение целей. Если Recovery вчера был высоким (70%+), укрепи связь между качественным восстановлением и способностью быть продуктивным и эффективным. Если Recovery был низким, напомни, что утренний ритуал — это инвестиция в восстановление, которое даёт энергию для продуктивного дня. Свяжи утренний ритуал с продуктивностью и достижением целей. Наполни чувством уверенности и силы для выполнения задач.
      # ВАЖНО: Вы можете настроить этот промпт под свои задачи и убеждения.
    fallback_message: "Я выбираю силу и энергию каждое утро. Тело и море наполняют меня мощью для продуктивного дня. Эта энергия превращается в действия, которые приближают меня к моим целям."

  S2:
    name: "Опора 'я есть' и намерение"
    time: "09:30"
    description: "5–10 минут 'я есть', благодарность, настрой дня"
    max_tokens: 700
    user_prompt_template: |
      Сейчас вторая часть утра. Слот: 5–10 минут тишины и практики «я есть» после моря (наблюдение, благодарность, намерение).
      Вчера этот слот был: {{yesterday_status}}.

      Физические показатели WHOOP за вчера:
      — Sleep (продолжительность сна): {{whoop_sleep_yesterday}}

      Создай программирующее сообщение: используй утверждения в настоящем времени ("Я есть источник ясности", "Я создаю фокус"), визуализируй, как эта ясность помогает принимать правильные решения и быть продуктивным. Если сон вчера был качественным (7+ часов), укрепи связь между восстановлением через сон и ясностью ума для принятия решений и продуктивной работы. Если сон был недостаточным, напомни, что практика «я есть» компенсирует это и помогает найти ясность даже при неидеальном восстановлении. Свяжи практику «я есть» с ощущением уверенности в достижении целей и продуктивности. Наполни чувством благодарности за возможности и прогресс.
      # ВАЖНО: Вы можете настроить этот промпт под свои задачи и убеждения.
    fallback_message: "Я есть источник ясности и фокуса. Эта пауза наполняет меня силой принимать правильные решения и быть продуктивным. Я чувствую благодарность за возможности и прогресс."

  S3:
    name: "Фокусный квант над главным проектом"
    time: "11:00"
    description: "60–90 минут глубокой работы над одним главным проектом"
    max_tokens: 700
    user_prompt_template: |
      Сейчас середина дня. Слот: один фокус-квант (60–90 минут) над главным проектом пользователя без отвлечений.
      Вчера фокус-квант был: {{yesterday_status}}.

      Физические показатели WHOOP за сегодня:
      — Strain (текущая нагрузка): {{whoop_strain_today}}

      Создай программирующее сообщение: используй утверждения в настоящем времени ("Я создаю ценность", "Я достигаю прогресса"), визуализируй, как глубокий фокус создаёт результаты и приближает к целям. Если Strain сегодня ещё низкий (0-8), укрепи, что сейчас идеальное время для фокус-кванта — энергия сохранена для продуктивной работы. Если Strain уже средний (9-14), напомни, что фокус-квант — это умственная нагрузка, которая отличается от физической и помогает эффективно использовать энергию. Свяжи фокус-квант с ощущением движения к целям и продуктивности. Используй метафору потока — как правильный фокус создаёт продуктивный поток работы.
      # ВАЖНО: Вы можете настроить этот промпт под свои задачи и убеждения.
    fallback_message: "Я создаю ценность через глубокий фокус. Каждый фокус-квант приближает меня к моим целям. Я чувствую, как мои идеи превращаются в результаты и прогресс."

  S4:
    name: "Шаг к цели"
    time: "14:00"
    description: "Один конкретный шаг к цели: письмо, созвон, оффер, улучшение воронки"
    max_tokens: 700
    user_prompt_template: |
      Сейчас дневной слот. Слот: один конкретный шаг к цели (письмо, созвон, оффер, улучшение воронки).
      Вчера шаг к цели был: {{yesterday_status}}.

      Физические показатели WHOOP за сегодня:
      — Strain (текущая нагрузка): {{whoop_strain_today}}

      Создай программирующее сообщение: используй утверждения в настоящем времени ("Я делаю шаг к цели", "Я создаю возможности"), визуализируй, как каждый шаг приближает к результатам. Если Strain сегодня умеренный (9-14), укрепи, что энергия направлена на продуктивные действия и каждый шаг — это инвестиция в достижение целей. Если Strain высокий (15+), напомни, что шаг к цели — это умственная активность, которая может быть выполнена даже при высокой физической нагрузке, и каждый шаг приближает к результатам. Свяжи действие с ощущением прогресса и уверенности в достижении целей. Наполни чувством, что ты уже создаёшь результаты прямо сейчас.
      # ВАЖНО: Вы можете настроить этот промпт под свои задачи и убеждения.
    fallback_message: "Я делаю шаг к своей цели. Каждое действие приближает меня к результатам. Я вижу, как мои усилия превращаются в прогресс, и это наполняет меня уверенностью."

  S5:
    name: "Закат / присутствие / девушка"
    time: "17:30"
    description: "Море, закат, контакт с девушкой и миром, не с ноута"
    max_tokens: 700
    user_prompt_template: |
      Сейчас ближе к вечеру. Слот: закат, море, девушка, тишина и присутствие без экрана.
      Вчера этот слот был: {{yesterday_status}}.

      Физические показатели WHOOP за сегодня:
      — Strain (текущая нагрузка): {{whoop_strain_today}}

      Создай программирующее сообщение: используй утверждения в настоящем времени ("Я живу полной жизнью", "Я наслаждаюсь моментом"), визуализируй, как продуктивный день позволяет наслаждаться моментами с близкими. Если Strain сегодня был высоким (15+), укрепи связь между активным днём, достижением целей и заслуженным отдыхом с близкими — это баланс успеха. Если Strain был умеренным (9-14), напомни, что закат и присутствие — это инвестиция в восстановление, которое даёт энергию для завтрашних продуктивных шагов. Свяжи закат и присутствие с ощущением успеха и удовлетворения — что ты уже создаёшь жизнь, где достижения сочетаются с живым контактом с миром.
      # ВАЖНО: Вы можете настроить этот промпт под свои задачи и убеждения.
    fallback_message: "Я живу полной жизнью прямо сейчас. Продуктивный день позволяет мне наслаждаться каждым моментом с близкими. Я чувствую, как достижения сочетаются с живым контактом с миром."

  S6:
    name: "Вечерняя интеграция и оценка дня"
    time: "21:00"
    description: "Честный взгляд — был ли день 'эталонным'"
    max_tokens: 1500
    user_prompt_template: |
      Сейчас вечер. Слот: честная оценка и интеграция дня.
      Сегодня по предыдущим слотам:
      — утро тела: {{s1_status}}
      — «я есть»: {{s2_status}}
      — фокус-квант: {{s3_status}}
      — шаг к цели: {{s4_status}}
      — закат/присутствие: {{s5_status}}

      Физические показатели WHOOP за сегодня:
      — Recovery: {{whoop_recovery}}
      — Sleep: {{whoop_sleep}}
      — Strain: {{whoop_strain}}
      — Workouts: {{whoop_workouts}}

      Создай развернутое программирующее сообщение для подсознания (4-6 предложений):

      1. Начни с рефлексии дня: что было сделано, какие шаги к целям были предприняты. Используй утверждения в настоящем времени ("Я создаю основу для успеха", "Я приближаюсь к своим целям").

      2. Если день был эталонным (большинство слотов выполнено): укрепи ощущение, что ты уже создаёшь результаты прямо сейчас. Визуализируй, как сегодняшние действия превращаются в прогресс и достижения. Покажи связь между твоими ритуалами и продуктивностью.

      3. Если день был не идеальным: покажи, что каждый день — это материал для следующего шага. Напомни, что важна не одна точка, а устойчивая частота продуктивности. Как в физике, правильная частота создаёт резонанс с успехом. Завтра ты продолжишь создавать результаты с новой силой.

      4. Заверши метафорой устойчивой частоты: как правильная частота (твои ежедневные ритуалы) создаёт резонанс с продуктивностью и притягивает достижения. Каждый день — это инвестиция в успех, и ты чувствуешь, как приближаешься к своим целям.

      Пиши тепло, уверенно, как равный собеседник. Наполни чувством уверенности и веры в успех.
      # ВАЖНО: Вы можете настроить этот промпт под свои задачи и убеждения.
    fallback_message: "Я создаю основу для успеха каждый день. Сегодняшние действия — это инвестиция в мой прогресс и движение к целям. Важна не одна точка, а устойчивая частота продуктивности. Как в физике, правильная частота создаёт резонанс с успехом и притягивает достижения. Я чувствую, как каждый день приближает меня к моим целям."

# Логика эталонного дня
ideal_day:
  # Минимум 4 из 5 первых слотов должны быть выполнены
  min_successful_slots: 4
  # В S6 должна быть выбрана кнопка "День ближе к эталону"
  s6_ideal_button: "ideal"

# База данных
database:
  path: "whoop_telegram_bot_ai.db"

# Конфигурация WHOOP API
whoop:
  api_url: "https://api.prod.whoop.com/developer"
  oauth_url: "https://api.prod.whoop.com/oauth/oauth2/auth"
  token_url: "https://api.prod.whoop.com/oauth/oauth2/token"
  redirect_uri: "https://scanovich.ai/whoop-callback.html"
  scopes:
    - "read:recovery"
    - "read:sleep"
    - "read:workout"
    - "read:profile"
    - "read:cycles" # Для доступа к /cycle endpoint с полными данными за день
    - "offline" # Запрашиваем refresh_token для автоматического обновления токенов
  # client_id и client_secret загружаются из переменных окружения WHOOP_CLIENT_ID и WHOOP_CLIENT_SECRET

# Мониторинг WHOOP в реальном времени
whoop_monitoring:
  enabled: true # Включить автоматический мониторинг стресса
  check_interval_minutes: 30 # Интервал проверки (30-60 минут)
  active_hours:
    start: "08:00" # Начало мониторинга
    end: "00:00" # Конец мониторинга (до полуночи)
  stress_threshold: 12.0 # Порог высокого стресса (Strain) по умолчанию
  notification_cooldown_hours: 2 # Минимум между уведомлениями (часы)
  recovery_thresholds:
    low: 50 # Низкое восстановление (< 50%) → более срочное уведомление
    high: 70 # Хорошее восстановление (>= 70%) → более мягкое уведомление
  stress_advice_prompt: |
    Твой текущий Strain (уровень стресса): {{strain_score}}
    Recovery: {{recovery_score}}%
    Время: {{current_time}}

    Создай короткое сообщение (3-5 предложений) с практическим советом по снижению стресса и возврату к ясности. Используй принципы программирования подсознания:
    - Позитивные утверждения в настоящем времени ("Я возвращаюсь к ясности", "Я выбираю спокойствие")
    - Конкретные техники (дыхание, движение, переключение внимания)
    - Связь с восстановлением и продуктивностью
    - Образы спокойствия и ясности

    {% if recovery_score < 50 %}
    Учти: Recovery низкий (< 50%), значит восстановление недостаточное. Рекомендуй более щадящие техники восстановления.
    {% elif recovery_score >= 70 %}
    Учти: Recovery хороший (>= 70%), значит организм готов к нагрузке. Можно рекомендовать более активные техники переключения.
    {% endif %}

    Пиши по-русски, без эмодзи или максимум один.

# Логирование
logging:
  level: "INFO" # DEBUG, INFO, ERROR
  format: "json" # json или text

